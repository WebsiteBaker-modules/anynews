<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>Read Me - Anynews</title>
<style type="text/css" media="screen"><!--
body    { 
font-size: small;
font-family: Verdana, Helvetica, sans-serif; 
background-color: #dde4ea; 
padding: 0 15%;
}

div.header   { 
width: 100%; 
background-color: #fafcff; 
padding: 5px 15px; 
border: solid thin #576c7d 
}

div.header dt { 
float: left;
font-weight: bold;
line-height: 1.5em;
}

div.header dd { 
margin-left: 10em; 
line-height: 1.5em;
}

h1, h2, h3 {
font-family: Arial, sans-serif; 
color: #036;
}

h1 {
border-bottom: 2px #CCC solid;
}

pre.code {
width: 100%;
font-family: 'Courier New', Courier, monospace;
padding: 5px 15px; 
color: #900;
background-color: #fafcff; 
font-size: 95%;
line-height: 1.4em;
border: solid thin #576c7d;
overflow: auto;
}
--></style>
</head>

<body>

<div class="header">
	<h1>Code snippet: "Anynews"</h1>
	<p>Code snippet to display news from the news module at any page you want</p>
	<dl>
		<dt>@author:</dt>
		<dd>cwsoft (http://cwsoft.de)</dd>

		<dt>@copyright:</dt>
		<dd>&copy; cwsoft</dd>

		<dt>@license:</dt>
		<dd><a href="http://www.gnu.org/licenses/gpl.html" target="_blank">GNU General Public license 3.0</a></dd>

		<dt>@version:</dt>
		<dd>2.0.0</dd>

		<dt>@requires:</dt>
		<dd><strong style="color: red;">PHP 5.2.17 or higher, WB news module</strong></dd>
	</dl>
</div>

<h2>A: Requirements and Installation of "Anynews"</h2>
<ol>
	<li>Download <tt>anynews.zip</tt> from the addons repository and install it via the Website Baker <i>backend &gt; Add-ons &gt; Modules</i></li>
	<li>invoke the new function <tt>displayNewsItems()</tt> from a page/section of type code or the template index.php file</li>
</ol>

<h2>B: Using "Anynews"</h2>
<h3>Invoke the "Anynews" function displayNewsItems() from a code page:</h3>
<p>Copy the code below to a page or section of type code.</p>
<pre class="code">
if (function_exists('displayNewsItems')) {
	displayNewsItems();
}
</pre>

<h3>Invoke the "Anynews" function displayNewsItems() from the template:</h3>
<p>Add the following code to the index.php file of your template</p>
<pre class="code">
&lt;?php
if (function_exists('displayNewsItems')) {
	displayNewsItems();
}
?&gt;
</pre>

<h2>C: The "Anynews" function parameters: displayNewsItems()</h2>
<p>You can customize the output of "Anynews" via several optional parameters to the function displayNewsItems(). 
If you invoke Anynews with displayNewsItems, the following default values are used.</p>
<pre class="code">
&lt;?php displayNewsItems(
   $group_id = 0,
   $max_news_items = 10,
   $max_news_lenght = -1,
   $display_mode = 1,
   $lang_id = 'auto',
   $strip_tags = true,
   $allowed_tags = '&lt;p&gt;&lt;a&gt;&lt;img&gt;',
   $custom_placeholder = false,
   $sort_by = 1,
   $sort_order = 1,
   $not_older_than = 0
   ); 
?&gt;
</pre>

<strong>Optional Parameters:</strong>
<pre>
  group_id...        group to show news from (default:= 0 all groups, X:= group X, for multiple groups: array(2,4,5) )
  max_news_items...  maximal number of news shown (default:= 10, min:=1, max:= 999)
  max_news_length... maximal length of the short news text shown (default:=-1 for full news length)
  display_mode...    1:=details (default); 2:=unsorted list; 3:=coda slider; 4-99 (custom template: custom_output_display_mode_X.htt)
  lang_id...         module language file ID (default:= 'auto', examples: 'auto', 'DE', 'EN')

  strip_tags...      true:=remove all tags not allowed via variable $allowed_tags (default:=true); false:=don´t strip tags
  allowed_tags...    allowed tags (default:='&lt;p&gt;&lt;a&gt;&lt;img&gt;')
  custom_placeholder false:= none (default), array('MY_VAR_1' =&gt; '%TAG%', ... 'MY_VAR_N' =&gt; '#regex_N#' ...)

  sort_by...         1:=position (default), 2:=posted_when, 3:=published_when, 4:= random order, 5:= number of comments
  sort_order...      1:=descending (default), 2:=ascending
  not_older_than..   0:=disabled (default), 0-999 (only show news `published_when` date &lt;=x days; 12 hours:=0.5)
</pre>
<p style="color: red;">To find the right "group_id", go to the page of type "News" in the Website Baker backend (section Pages). Move your mouse pointer over the group name you are interested in. Have a look at the browser status bar (Firefox at the bottom) and search for &group_id=xx. If nothing is shown in the status bar, simply click on the group name and extract the group_id from the URL displayed in your browser.</p>
<strong>Using the Coda Slider Output ($display_mode = 3):</strong>
<p>When using $display_mode = 3 (coda slider), please keep in mind to add the following code line to the head section of the index.php file of your template. Coda Slider requires Javascript enabled to show it´s full potential. However, this effect will also work with Javascript disabled (but less fancy of course).</p>
<pre class="code">
&lt;?php include_once(WB_PATH . '/modules/anynews/coda-slider.inc.php'); ?&gt;
</pre>
<p>You can adapt the look and feel of the Coda Slider Output by modifying the two files: <tt>coda-slider.css</tt> and <tt>/htt/coda_slider_output.htt</tt> located in the Anynews module folder.</p>

<strong>Example for a customised call:</strong>
<pre class="code">
&lt;?php displayNewsItems(
   $group_id = array(3,4),
   $max_news_items = 5,
   $max_news_lenght = 50,
   $display_mode = 2,
   $lang_id = 'auto',
   $strip_tags = true,
   $allowed_tags = '&lt;p&gt;&lt;a&gt;&lt;img&gt;',
   $custom_placeholder = array('IMG_LINK' =&gt; '%img%', 'MY_VAR' =&gt; '#(test)#i'),
   $sort_by = 4,
   $sort_order = 1,
   $not_older_than = 0.5
   ); 
?&gt;
</pre>
<p>The function call above displays news from the groups three and four (array(3,4)). Maximum five news entries (5) are shown at once. The short text is automatically truncated after fifty characters (50). As output format the list style is used (2). Language specific outputs e.g. for the read more text are automatically detected (auto) by searching the URL for a supported language key (e.g. /EN/ --> yourdomain.com/pages/en/page.php). If no language key was found in the URL, the Website Baker constant <tt>LANGUAGE</tt> is used.</p>

<p>Tags are removed (true) except paragraph, anchor and image tags ('&lt;p&gt;&lt;a&gt;&lt;img&gt;'). Additional placeholders are added if the regular expression matches, which can then be used in the template files (array('IMG_LINK' =&gt; '%img', 'MY_VAR' =&gt; '#(test)#i'). Placeholders are named as follows: 'MY_VAR' =&gt; '<tt>PREFIX_</tt>MY_VAR<tt>_NUMBER</tt>' (PREFIX:= SHORT/LONG for short/long news text, NUMBER:=counter starting with 1).</p>

<p>The short hand regular expressions (%TAG%) can be used when dealing with inputs embedded in tags. For images, the full image tag is returned, for other tags, only the text between opening and closing pairs (&lt;TAG&gt;...&lt;/TAG&gt;) is returned. You can also provide your own regular expression. With '#(test)#i', all matches of the word test (case insensitiv) are returned. Only one capturing group () can be used. The regular expression needs to be enclosed #.</p>

<p>News are outputed randomly (4) in descending order (1). Only news not older than (field `published_when`) 12 hours (0.5 days) will be displayed (0.5).</p>

<h2>D: Customizing the output</h2>
<p>You can change the output of the module via the HTML template files located in "anynews/htt/" and by applying CSS rules. There is no need to change the PHP code itself.</p>

<h3>The HTML template files (anynews/htt/*.htt)</h3>
<p>View the example <tt>/htt/custom_output_display_mode_4.htt</tt> to get a list of all placeholders which can be used in the template. Alternatively you can set <tt>$display_mode:=4</tt> to get the output on the screen.

The most important placeholders are shown below:</p>
<p><strong>NEWS INFO: </strong>{TITLE}, {POSTED_WHEN}, {PUBLISHED_WHEN}, {CONTENT_SHORT}, {CONTENT_LONG}, {LINK} ...<br />
<strong>LANGUAGE FILES: </strong>{TXT_HEADER}, {TXT_READMORE}, {TXT_NO_NEWS}, {TXT_NEWS} ... <br />
<p><strong>Note: </strong>The text stored in {TXT_NO_NEWS} is automatically added if no news are available.

<p>Within the template files, you can add or remove HTML elements like you want, as long as you <span style="color:red; font-weight: bold;">DO NOT TOUCH THE TWO HTML COMMENT LINES</span>. These lines mark the beginn and the end of a news block. The stuff between these two lines will be outputed as many times as news items exist.</p>
<pre class="code">
&lt;!-- BEGIN news_block --&gt;
 Custom HTML code and placeholder for news items
&lt;!-- END news_block --&gt;
</pre>

<p>You can use a custom template output file via the parameter $display_mode. If you set <code>$display_mode</code> to 3, the custom template file <code>/htt/custom_output_display_mode_3.htt</code> is used if it exists in the <code>/htt</code> folder.</p>

<p><strong>Note: </strong>You can use the Admin tool: <strong>"Addon File Editor"</strong> from the Website Baker <a href="http://addons.websitebaker.org/pages/modules/admin-tools.php#id_248" target="_blank">Add-ons repository</a> to edit the template files of anynews via the backend of Website Baker.</p>

<p>
<strong>Q: Missing "read more" link?</strong><br />
The link is shown only if the news entry has some "long text". It "disappears" if no long text is found.<br />
If you wish to appear the "read more" link in any case, remove the <code>&lt;!-- BEGIN readmore_link_block --&gt;</code> and <code>&lt;!-- END readmore_link_block --&gt;</code> block markers from the template.
</p>

<h3>Custom CSS</h3>
<p>Using CSS definitions, one can customize the look and feel of Anynews to fit your needs. Per default, the output of Anynews is embedded in a Div container <code>&lt;div class="anynews"&gt; ... &lt;/div&gt;</code>. The Div container can be used to style the HTML elements embedded in it without changing the CSS definitions of default elements or other modules.</p>

<p>The best place for your Anynews CSS definitions is the "frontend.css" file located in the Anynews module folder. Please keep in mind, that you have to manually link the Anynews "frontend.css" file to the head section in the "index.php" file of your template to use it. This can be achieved by the following code:</p>
<pre class="code">
&lt;link rel="stylesheet" type="text/css" href="&lt;?php echo WB_URL;?&gt;/modules/anynews/frontend.css" media="screen"/&gt;
</pre>

<p><strong>Note: </strong>You can use the Admin tool: <strong>"Addon File Editor"</strong> from the Website Baker <a href="http://addons.websitebaker.org/pages/modules/admin-tools.php#id_248" target="_blank">Add-ons repository</a> to edit the "frontend.css" file of Anynews via the backend of Website Baker.</p>

The examples below show how you can use CSS definitions to style the Anynews layout to fit your needs.</p>

<p>
Q: The font size of the news text is too big?<br />
div.anynews p { font-size:80%; }
</p>

<p>
Q: You want the news title to show up in brown?<br />
div.anynews strong { color:brown; }
</p>

<p>
Q: The news header should have a left brown border?<br />
div.anynews h2 { border:1px dotted brown; margin:5px; padding:0; }
</p>

<p>
Q: You don´t like the bullets in the unsorted list<br />
div.anynews ul{ list-style-type:none; }
</p>

<p>
<strong>Please note:</strong> 
I will not answer questions related to CSS formating as all this information can be found in the WWW.
Good starting point is: <a href="http://www.css4you.de/" target="_blank">http://www.css4you.de/</a> or <a href="http://glish.com/css/" target="_blank">http://glish.com/css/</a>.
</p>

</body>
</html>